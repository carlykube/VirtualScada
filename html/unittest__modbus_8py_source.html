<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>VirtualSCADA: moduleScripts/RTUscripts/protolibs/modbus-tk.hg/tests/unittest_modbus.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">VirtualSCADA
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">VirtualSCADA Senior Design Project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('unittest__modbus_8py_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">unittest_modbus.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="unittest__modbus_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespacetests_1_1unittest__modbus.html">    1</a></span>&#160;<span class="comment">#!/usr/bin/env python</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"># -*- coding: utf-8 -*-</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="stringliteral"> Modbus TestKit: Implementation of Modbus protocol in python</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="stringliteral"> (C)2009 - Luc Jean - luc.jean@gmail.com</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="stringliteral"> (C)2009 - Apidev - http://www.apidev.fr</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="stringliteral"> This is distributed under GNU LGPL license, see license.txt</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">import</span> unittest</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">import</span> <a class="code" href="namespacemodbus__tk_1_1modbus.html">modbus_tk.modbus</a></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">import</span> threading</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">import</span> struct</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">import</span> logging</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">import</span> time</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">from</span> <a class="code" href="namespacemodbus__tk_1_1hooks.html">modbus_tk.hooks</a> <span class="keyword">import</span> install_hook</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="namespacetests_1_1unittest__modbus.html#ae9c29667350ae00a0837fc1e77c279e2">   20</a></span>&#160;LOGGER = <a class="code" href="namespacemodbus__tk_1_1utils.html#ac11b49ef36ecb6a22a86d7bc94431c8f">modbus_tk.utils.create_logger</a>(<span class="stringliteral">&quot;udp&quot;</span>)</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html">   22</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html">TestSlaveRequestHandler</a>(unittest.TestCase):</div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a26b1b5aaa859d024cb7114cc1d4c1fd2">   23</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a26b1b5aaa859d024cb7114cc1d4c1fd2">setUp</a>(self):</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#abbcd3f292ab6e8daf7fe4c2f0d94780e">_slave</a> = <a class="code" href="classmodbus__tk_1_1modbus_1_1_slave.html">modbus_tk.modbus.Slave</a>(0)</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a705391f3be33314bd5788a28f7538642">_name</a> = <span class="stringliteral">&quot;toto&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    </div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a56c54e463c817da67a20bb5e7b3b433a">   27</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a56c54e463c817da67a20bb5e7b3b433a">tearDown</a>(self):</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#aa0850b5aede0b4274184f4317b9725f2">   30</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#aa0850b5aede0b4274184f4317b9725f2">testUnhandledFunction</a>(self):</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that an error is sent back when using an unknown function&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        func_code = 55</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        response = struct.pack(<span class="stringliteral">&quot;&gt;BB&quot;</span>, 128+func_code, modbus_tk.defines.ILLEGAL_FUNCTION)</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        self.assertEqual(response, self._slave.handle_request(struct.pack(<span class="stringliteral">&quot;&gt;B&quot;</span>, func_code)))</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        self.assertEqual(response, self._slave.handle_request(struct.pack(<span class="stringliteral">&quot;&gt;BHHHH&quot;</span>, func_code, 1, 2, 3, 4)))</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keyword">def </span>_read_digital_data(self, function, block_type):</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        self._slave.add_block(self._name, block_type, 0, 128)</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        list_of_coils = ((1, 0, 2, 1), (0, ), (1, ), [0, 1]*20, [1]*128, [1, 0, 1]*7, (1, 0, 0, 1), [1, 0]*20)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        starting_addresses = (0, 0, 127, 40, 0, 0, 124, 87)</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        list_of_responses = (struct.pack(<span class="stringliteral">&quot;&gt;BBB&quot;</span>, function, 1, 13),</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                             struct.pack(<span class="stringliteral">&quot;&gt;BBB&quot;</span>, function, 1, 0),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                             struct.pack(<span class="stringliteral">&quot;&gt;BBB&quot;</span>, function, 1, 1),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                             struct.pack(<span class="stringliteral">&quot;&gt;BBBBBBB&quot;</span>, function, 5, 170, 170, 170, 170, 170),</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                             struct.pack(<span class="stringliteral">&quot;&gt;BB&quot;</span>, function, 16)+(struct.pack(<span class="stringliteral">&quot;&gt;B&quot;</span>, 255)*16),</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                             struct.pack(<span class="stringliteral">&quot;&gt;BBBBB&quot;</span>, function, 3, 109, 219, 22),</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                             struct.pack(<span class="stringliteral">&quot;&gt;BBB&quot;</span>, function, 1, 9),</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                             struct.pack(<span class="stringliteral">&quot;&gt;BBBBBBB&quot;</span>, function, 5, 85, 85, 85, 85, 85),</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                             )</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> xrange(len(list_of_coils)):</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            self._slave.set_values(self._name, starting_addresses[i], list_of_coils[i])</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            self.assertEqual(list_of_responses[i], self._slave.handle_request(struct.pack(<span class="stringliteral">&quot;&gt;BHH&quot;</span>, function, starting_addresses[i], len(list_of_coils[i]))))</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keyword">def </span>_read_out_of_blocks(self, function, block_type):</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        self._slave.add_block(self._name, block_type, 20, 80)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        list_of_ranges = ((200, 10), (0, 1), (100, 1), (100, 5), (60, 50), (10, 30))</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        response = struct.pack(<span class="stringliteral">&quot;&gt;BB&quot;</span>, 128+function, modbus_tk.defines.ILLEGAL_DATA_ADDRESS)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordflow">for</span> r <span class="keywordflow">in</span> list_of_ranges:</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            self.assertEqual(response, self._slave.handle_request(struct.pack(<span class="stringliteral">&quot;&gt;BHH&quot;</span>, function, r[0], r[1])))</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">def </span>_read_continuous_blocks(self, function, block_type):</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        self._slave.add_block(self._name+<span class="stringliteral">&quot;1&quot;</span>, block_type, 0, 20)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        self._slave.add_block(self._name+<span class="stringliteral">&quot;2&quot;</span>, block_type, 20, 80)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        self._slave.add_block(self._name+<span class="stringliteral">&quot;3&quot;</span>, block_type, 100, 20)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        list_of_ranges = ((0, 30), (10, 20), (0, 120), (80, 30))</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        response = struct.pack(<span class="stringliteral">&quot;&gt;BB&quot;</span>, 128+function, modbus_tk.defines.ILLEGAL_DATA_ADDRESS)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">for</span> r <span class="keywordflow">in</span> list_of_ranges:</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            self.assertEqual(response, self._slave.handle_request(struct.pack(<span class="stringliteral">&quot;&gt;BHH&quot;</span>, function, r[0], r[1])))</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#ae5c4d121f1ca2153d7ba2ddf1e1a71d2">   76</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#ae5c4d121f1ca2153d7ba2ddf1e1a71d2">testHandleReadCoils</a>(self):</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that the correct response pdu is sent when receiving a pdu for reading coils&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a73bef7c5859f63411d218e13e54ac7c0">_read_digital_data</a>(modbus_tk.defines.READ_COILS, modbus_tk.defines.COILS)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#ad4b38979291b94372573dc94e7d7f44c">   80</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#ad4b38979291b94372573dc94e7d7f44c">testHandleReadDigitalInputs</a>(self):</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that the correct response pdu is sent when receiving a pdu for reading discrete inputs&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a73bef7c5859f63411d218e13e54ac7c0">_read_digital_data</a>(modbus_tk.defines.READ_DISCRETE_INPUTS, modbus_tk.defines.DISCRETE_INPUTS)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a789fb926c435ba3bc75f2690710d0ed1">   84</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a789fb926c435ba3bc75f2690710d0ed1">testHandleReadCoilsOutOfBlocks</a>(self):</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that an error response pdu is sent when receiving a pdu for reading coils at an unknown addresses&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a4fcc5bb04d8c95bb4d12f38d213fd5b6">_read_out_of_blocks</a>(modbus_tk.defines.READ_COILS, modbus_tk.defines.COILS)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a347b6350ebeee5ba93b90f155e9c9554">   88</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a347b6350ebeee5ba93b90f155e9c9554">testHandleReadDiscreteInputsOutOfBlocks</a>(self):</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that an error response pdu is sent when receiving a pdu for reading discrete inputs at an unknown addresses&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a4fcc5bb04d8c95bb4d12f38d213fd5b6">_read_out_of_blocks</a>(modbus_tk.defines.READ_DISCRETE_INPUTS, modbus_tk.defines.DISCRETE_INPUTS)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a45e6676df6c3f1d2185be6657affb1bb">   92</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a45e6676df6c3f1d2185be6657affb1bb">testHandleReadCoilsOnContinuousBlocks</a>(self):</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that an error response pdu is sent when receiving a pdu for reading coils at an address shared on distinct blocks&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#ac69287979e12ff8d7bd2857350fdb1e7">_read_continuous_blocks</a>(modbus_tk.defines.READ_COILS, modbus_tk.defines.COILS)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#af501a33c3b94aa2e6f476f72fb5a0bb8">   96</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#af501a33c3b94aa2e6f476f72fb5a0bb8">testHandleReadDiscreteInputsOnContinuousBlocks</a>(self):</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that an error response pdu is sent when receiving a pdu for reading discrete inputs at an address shared on distinct blocks&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#ac69287979e12ff8d7bd2857350fdb1e7">_read_continuous_blocks</a>(modbus_tk.defines.READ_DISCRETE_INPUTS, modbus_tk.defines.DISCRETE_INPUTS)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keyword">def </span>_make_response(self, function, regs):</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        response = struct.pack(<span class="stringliteral">&quot;&gt;BB&quot;</span>, function, 2*len(regs))</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">for</span> r <span class="keywordflow">in</span> regs:</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            response += struct.pack(<span class="stringliteral">&quot;&gt;H&quot;</span>, r)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">return</span> response</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">def </span>_read_registers(self, function, block_type):</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a705391f3be33314bd5788a28f7538642">_name</a>, block_type, 0, 128)</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        list_of_regs = ((20, 2, 19, 75, 42), (15, ), [11, 12]*20, <a class="code" href="d3_8min_8js.html#a3370df69994ddee947b5acb08e416eed">range</a>(125), (27, ), (1, 2, 3, 4), <a class="code" href="d3_8min_8js.html#a3370df69994ddee947b5acb08e416eed">range</a>(10))</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        starting_addresses = (0, 0, 0, 0, 127, 123, 82)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> xrange(len(list_of_regs)):</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            self._slave.set_values(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a705391f3be33314bd5788a28f7538642">_name</a>, starting_addresses[i], list_of_regs[i])</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            self.assertEqual(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a0f9c1cfea60d170cb6cea11403cd1b7e">_make_response</a>(function, list_of_regs[i]), self._slave.handle_request(struct.pack(<span class="stringliteral">&quot;&gt;BHH&quot;</span>, function, starting_addresses[i], len(list_of_regs[i]))))</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#aa56879674f06e6887a2702b57e980a30">  115</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#aa56879674f06e6887a2702b57e980a30">testHandleReadHoldingRegisters</a>(self):</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that the correct response pdu is sent when receiving a pdu for reading holding registers&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a4076af55e465a7670252081cf8beee44">_read_registers</a>(modbus_tk.defines.READ_HOLDING_REGISTERS, modbus_tk.defines.HOLDING_REGISTERS)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#aaefbfe1d894fae442358ca001876efd1">  119</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#aaefbfe1d894fae442358ca001876efd1">testHandleReadAnalogInputs</a>(self):</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that the correct response pdu is sent when receiving a pdu for reading input registers&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a4076af55e465a7670252081cf8beee44">_read_registers</a>(modbus_tk.defines.READ_INPUT_REGISTERS, modbus_tk.defines.ANALOG_INPUTS)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keyword">def </span>_read_too_many_registers(self, function, block_type):</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a705391f3be33314bd5788a28f7538642">_name</a>, block_type, 0, 128)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        self._slave.set_values(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a705391f3be33314bd5788a28f7538642">_name</a>, 0, <a class="code" href="d3_8min_8js.html#a3370df69994ddee947b5acb08e416eed">range</a>(128))</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        response = struct.pack(<span class="stringliteral">&quot;&gt;BB&quot;</span>, function+128, modbus_tk.defines.ILLEGAL_DATA_VALUE)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        self.assertEqual(response, self._slave.handle_request(struct.pack(<span class="stringliteral">&quot;&gt;BHH&quot;</span>, function, 0, 126)))</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a6691efde2183e416d0e1e9c985b5ac15">  129</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a6691efde2183e416d0e1e9c985b5ac15">testHandleReadTooManyHoldingRegisters</a>(self):</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that an error is returned when handling a pdu for reading more than 125 holding registers&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a8df671a80eb460353428a0cd5059b902">_read_too_many_registers</a>(modbus_tk.defines.READ_HOLDING_REGISTERS, modbus_tk.defines.HOLDING_REGISTERS)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a010e6010f8458aa320379073ea082e44">  133</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a010e6010f8458aa320379073ea082e44">testHandleReadTooManyAnalogInputs</a>(self):</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that an error is returned when handling a pdu for reading more than 125 input registers&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a8df671a80eb460353428a0cd5059b902">_read_too_many_registers</a>(modbus_tk.defines.READ_INPUT_REGISTERS, modbus_tk.defines.ANALOG_INPUTS)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a8fd137163afea7254084d66180df6948">  137</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a8fd137163afea7254084d66180df6948">testHandleReadHoldingRegistersOutOfBlocks</a>(self):</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that an error is returned when handling a pdu for reading out of blocks&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a4fcc5bb04d8c95bb4d12f38d213fd5b6">_read_out_of_blocks</a>(modbus_tk.defines.READ_HOLDING_REGISTERS, modbus_tk.defines.HOLDING_REGISTERS)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a787948375c4ff293d01630e5e981c9db">  141</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a787948375c4ff293d01630e5e981c9db">testHandleReadInputRegistersOutOfBlocks</a>(self):</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that an error is returned when handling a pdu for reading reading out of blocks&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a4fcc5bb04d8c95bb4d12f38d213fd5b6">_read_out_of_blocks</a>(modbus_tk.defines.READ_INPUT_REGISTERS, modbus_tk.defines.ANALOG_INPUTS)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a726b14953def89e7b7a7c1fada2179bc">  145</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a726b14953def89e7b7a7c1fada2179bc">testHandleReadHoldingRegistersOnContinuousBlocks</a>(self):</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that an error response pdu is sent when receiving a pdu for reading coils at an address shared on distinct blocks&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#ac69287979e12ff8d7bd2857350fdb1e7">_read_continuous_blocks</a>(modbus_tk.defines.READ_HOLDING_REGISTERS, modbus_tk.defines.HOLDING_REGISTERS)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a47e56ac3a16b0ea02f6b9e783ac7cfc1">  149</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a47e56ac3a16b0ea02f6b9e783ac7cfc1">testHandleReadInputregistersOnContinuousBlocks</a>(self):</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that an error response pdu is sent when receiving a pdu for reading discrete inputs at an address shared on distinct blocks&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#ac69287979e12ff8d7bd2857350fdb1e7">_read_continuous_blocks</a>(modbus_tk.defines.READ_INPUT_REGISTERS, modbus_tk.defines.ANALOG_INPUTS)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html">  154</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html">TestSlaveBlocks</a>(unittest.TestCase):</div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a26b1b5aaa859d024cb7114cc1d4c1fd2">  155</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a26b1b5aaa859d024cb7114cc1d4c1fd2">setUp</a>(self):</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#abbcd3f292ab6e8daf7fe4c2f0d94780e">_slave</a> = <a class="code" href="classmodbus__tk_1_1modbus_1_1_slave.html">modbus_tk.modbus.Slave</a>(0)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a> = <span class="stringliteral">&quot;toto&quot;</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#aba67c951cddf1e7d84dc3fe0cbdeaabf">_block_types</a> = (modbus_tk.defines.COILS, modbus_tk.defines.DISCRETE_INPUTS,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                             modbus_tk.defines.HOLDING_REGISTERS, modbus_tk.defines.ANALOG_INPUTS)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    </div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a56c54e463c817da67a20bb5e7b3b433a">  161</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a56c54e463c817da67a20bb5e7b3b433a">tearDown</a>(self):</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    </div>
<div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a1f9195ca065c2e728d4d6865bcdb9bc6">  164</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a1f9195ca065c2e728d4d6865bcdb9bc6">testAddBlock</a>(self):</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Add a block and check that it is added&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        self._slave.add_block(self._name, modbus_tk.defines.COILS, 0, 100)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        self.assert_(self._slave._get_block(self._name))</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        </div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a45b857ca6c70300d45bfb1bf12932934">  169</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a45b857ca6c70300d45bfb1bf12932934">testRemoveBlock</a>(self):</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Add a block and remove it and make sure that it is not registred anymore&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, modbus_tk.defines.COILS, 0, 100)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        self.assert_(self._slave._get_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>))</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        self._slave.remove_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_missing_key_error.html">modbus_tk.modbus.MissingKeyError</a>, self._slave._get_block, (self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>))</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            </div>
<div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#afd61c1eff145d4237866c49d96641f32">  176</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#afd61c1eff145d4237866c49d96641f32">testAddBlockWithSameName</a>(self):</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Add a block and make sure that adding another block with teh same name fails&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, modbus_tk.defines.COILS, 0, 100)</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_duplicated_key_error.html">modbus_tk.modbus.DuplicatedKeyError</a>, self._slave.add_block, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, modbus_tk.defines.COILS, 100, 100)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a0d9eb34faa49d048623d3861da5148d4">  181</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a0d9eb34faa49d048623d3861da5148d4">testAddAndRemoveBlocks</a>(self):</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Add 30 blocks and remove them&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        count = 30</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> xrange(count):</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>+str(i), modbus_tk.defines.COILS, 100*i, 100)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> xrange(count):</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            name = self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>+str(i)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            self.assert_(self._slave._get_block(name))</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            self._slave.remove_block(name)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_missing_key_error.html">modbus_tk.modbus.MissingKeyError</a>, self._slave._get_block, name)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    </div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#acd7bdb8764d9c4ad1ba7c6785adf47c8">  193</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#acd7bdb8764d9c4ad1ba7c6785adf47c8">testAddBlocksOfType</a>(self):</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Add a block of each type and remove them&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#aba67c951cddf1e7d84dc3fe0cbdeaabf">_block_types</a>:</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>+str(i), i, 0, 100)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#aba67c951cddf1e7d84dc3fe0cbdeaabf">_block_types</a>:</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            name = self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>+str(i)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            self.assert_(self._slave._get_block(name))</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            self._slave.remove_block(name)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_missing_key_error.html">modbus_tk.modbus.MissingKeyError</a>, self._slave._get_block, name)</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        </div>
<div class="line"><a name="l00204"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#af066fa9ff71b626cb820b8c8a2ab08cb">  204</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#af066fa9ff71b626cb820b8c8a2ab08cb">testAddUnsupportedBlock</a>(self):</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Add a block with a wrong type&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        self.assert_(5 <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#aba67c951cddf1e7d84dc3fe0cbdeaabf">_block_types</a>)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_invalid_modbus_block_error.html">modbus_tk.modbus.InvalidModbusBlockError</a>, self._slave.add_block, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 5, 100, 100)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_missing_key_error.html">modbus_tk.modbus.MissingKeyError</a>, self._slave._get_block, (self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>))</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                </div>
<div class="line"><a name="l00210"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#af8c35f584ccb58c13a53d2f4c651c47a">  210</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#af8c35f584ccb58c13a53d2f4c651c47a">testAddWrongAddress</a>(self):</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Add a block with a wrong addresss&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#aba67c951cddf1e7d84dc3fe0cbdeaabf">_block_types</a>:</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_invalid_argument_error.html">modbus_tk.modbus.InvalidArgumentError</a>, self._slave.add_block, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, i, -5, 100)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_missing_key_error.html">modbus_tk.modbus.MissingKeyError</a>, self._slave._get_block, (self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>))</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    </div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a68814c2f3d97e49a38a046c877a8fc34">  216</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a68814c2f3d97e49a38a046c877a8fc34">testAddWrongSize</a>(self):</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Add a block with a wrong size&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#aba67c951cddf1e7d84dc3fe0cbdeaabf">_block_types</a>:</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_invalid_argument_error.html">modbus_tk.modbus.InvalidArgumentError</a>, self._slave.add_block, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, i, 0, 0)</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_missing_key_error.html">modbus_tk.modbus.MissingKeyError</a>, self._slave._get_block, (self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>))</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_invalid_argument_error.html">modbus_tk.modbus.InvalidArgumentError</a>, self._slave.add_block, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, i, 0, -10)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_missing_key_error.html">modbus_tk.modbus.MissingKeyError</a>, self._slave._get_block, (self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>))</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    </div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a6007efa5684c2cf07e8a14777e36d2ad">  224</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a6007efa5684c2cf07e8a14777e36d2ad">testOverlappedBlocks</a>(self):</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Add 2 blocks with overlapped ranges and check that the 2nd one is not added&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#aba67c951cddf1e7d84dc3fe0cbdeaabf">_block_types</a>:</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, i, 0, 100)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="keywordflow">for</span> j <span class="keywordflow">in</span> xrange(100):</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_overlap_modbus_block_error.html">modbus_tk.modbus.OverlapModbusBlockError</a>, self._slave.add_block, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>+<span class="stringliteral">&quot;_&quot;</span>, i, j, 100)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            self._slave.remove_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            </div>
<div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#ab09a814d4fb0c871c2145e0269ee4861">  232</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#ab09a814d4fb0c871c2145e0269ee4861">testAddContinuousBlock</a>(self):</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Add 2 continuous blocks and check that it is ok&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#aba67c951cddf1e7d84dc3fe0cbdeaabf">_block_types</a>:</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, i, 0, 100)</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>+<span class="stringliteral">&quot;_&quot;</span>, i, 100, 100)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            self._slave.remove_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>)</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            self._slave.remove_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>+<span class="stringliteral">&quot;_&quot;</span>)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        </div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a80398e624a791449f001013c44085e81">  240</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a80398e624a791449f001013c44085e81">testMultiThreadedAccess</a>(self):</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test mutual access&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keyword">def </span>add_blocks(slave, name, starting_address):</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            slave.add_block(name, modbus_tk.defines.COILS, starting_address, 10)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        threads = []</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> xrange(10):    </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            threads.append(threading.Thread(target=add_blocks, args=(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#abbcd3f292ab6e8daf7fe4c2f0d94780e">_slave</a>, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>+str(i), i*10)))</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            threads[i].start()</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="keywordflow">for</span> t <span class="keywordflow">in</span> threads:</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            t.join()</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> xrange(10):</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            self._slave.remove_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>+str(i))</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            </div>
<div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a79b38821352d9c9a41c2187986350988">  255</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a79b38821352d9c9a41c2187986350988">testSetAndGetRegister</a>(self):</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;change the value of a register and check that it is properly set&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, modbus_tk.defines.HOLDING_REGISTERS, 0, 100)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        self.assertEqual(self._slave.get_values(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 10, 1), (0, ))</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        self._slave.set_values(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 10, 2)</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        self.assertEqual(self._slave.get_values(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 10, 1), (2, ))</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        </div>
<div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a94fd8a754b77cb45eb8d2bf1dee95b51">  262</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a94fd8a754b77cb45eb8d2bf1dee95b51">testSetAndGetSeveralRegisters</a>(self):</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;change the value of several registers and check that it is properly set&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, modbus_tk.defines.HOLDING_REGISTERS, 0, 100)</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        self.assertEqual(self._slave.get_values(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 10, 10), tuple([0]*10))</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        self._slave.set_values(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 10, <a class="code" href="d3_8min_8js.html#a3370df69994ddee947b5acb08e416eed">range</a>(0, 10))</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        self.assertEqual(self._slave.get_values(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 10, 10), tuple(<a class="code" href="d3_8min_8js.html#a3370df69994ddee947b5acb08e416eed">range</a>(10)))</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    </div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#ad4f5c4705eabc19811498be3789ac7a9">  269</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#ad4f5c4705eabc19811498be3789ac7a9">testSetAndGetSeveralCoils</a>(self):</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;change the value of several coils and check that it is properly set&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, modbus_tk.defines.COILS, 0, 100)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        self.assertEqual(self._slave.get_values(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 10, 10), tuple([0]*10))</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        self._slave.set_values(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 10, [1]*5)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        self.assertEqual(self._slave.get_values(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 10, 10), tuple([1]*5+[0]*5))</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    </div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a193c5ee63b6f3effbc1d6480e92e33ef">  276</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a193c5ee63b6f3effbc1d6480e92e33ef">testSetRegisterOutOfBounds</a>(self):</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;change the value of a register out of a block and check that error are raised&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, modbus_tk.defines.HOLDING_REGISTERS, 20, 80)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_out_of_modbus_block_error.html">modbus_tk.modbus.OutOfModbusBlockError</a>, self._slave.set_values, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 100, 2)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_out_of_modbus_block_error.html">modbus_tk.modbus.OutOfModbusBlockError</a>, self._slave.set_values, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 105, 2)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_out_of_modbus_block_error.html">modbus_tk.modbus.OutOfModbusBlockError</a>, self._slave.set_values, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 95, [1]*10)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_out_of_modbus_block_error.html">modbus_tk.modbus.OutOfModbusBlockError</a>, self._slave.set_values, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 0, [1]*10)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_out_of_modbus_block_error.html">modbus_tk.modbus.OutOfModbusBlockError</a>, self._slave.set_values, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 15, [1]*10)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;             </div>
<div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a5609f8b9a2346afb7a9da1265fc2435b">  285</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a5609f8b9a2346afb7a9da1265fc2435b">testSetRegisterAtTheBounds</a>(self):</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;change the values on limits of the block and check that it is properly set&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, modbus_tk.defines.HOLDING_REGISTERS, 20, 80)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        self._slave.set_values(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 20, 2)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        self._slave.set_values(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 99, 2)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    </div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#ad5d439572f905fac3d11f8ee8171c56a">  291</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#ad5d439572f905fac3d11f8ee8171c56a">testSetRegisterOnContinuousBlocks</a>(self):</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;create 2 continuous blocks and check that an error is raised when accessing adress range on the 2 blocks&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, modbus_tk.defines.HOLDING_REGISTERS, 20, 80)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>+<span class="stringliteral">&quot;_&quot;</span>, modbus_tk.defines.HOLDING_REGISTERS, 0, 20)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        self.assertRaises(<a class="code" href="classmodbus__tk_1_1modbus_1_1_out_of_modbus_block_error.html">modbus_tk.modbus.OutOfModbusBlockError</a>, self._slave.set_values, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, 15, [1]*10)</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        </div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a71a93ab3c396f1e0c09d012ad7f0c401">  297</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a71a93ab3c396f1e0c09d012ad7f0c401">testMultiThreadedSetValues</a>(self):</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;test that set and get values is thread safe&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        self._slave.add_block(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, modbus_tk.defines.HOLDING_REGISTERS, 0, 20)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        all_values = []</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        count = 20</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        nb_of_vals = 2</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keyword">def </span>change_val(slave, name, count, nb_of_vals):</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">for</span> i <span class="keywordflow">in</span> xrange(0, count, nb_of_vals):</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                vals = <a class="code" href="d3_8min_8js.html#a3370df69994ddee947b5acb08e416eed">range</a>(i, i+nb_of_vals)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                slave.set_values(name, 0, vals)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                time.sleep(0.02)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keyword">def </span>get_val(slave, name, count, nb_of_vals, all_values):</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            <span class="keywordflow">for</span> i <span class="keywordflow">in</span> xrange(0, count, nb_of_vals):</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                <span class="keywordflow">for</span> j <span class="keywordflow">in</span> xrange(2):</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                    vals = slave.get_values(name, 0, nb_of_vals)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                    all_values.append(vals)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                    time.sleep(0.01)    </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        threads = []</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        threads.append(threading.Thread(target=change_val, args=(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#abbcd3f292ab6e8daf7fe4c2f0d94780e">_slave</a>, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, count, nb_of_vals)))</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        threads.append(threading.Thread(target=get_val, args=(self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#abbcd3f292ab6e8daf7fe4c2f0d94780e">_slave</a>, self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">_name</a>, count, nb_of_vals, all_values)))</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">for</span> t <span class="keywordflow">in</span> threads:</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            t.start()</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">for</span> t <span class="keywordflow">in</span> threads:</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            t.join()</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        vals = []</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        expected_values = []</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> xrange(0, count, nb_of_vals):</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            expected_values.append(tuple(<a class="code" href="d3_8min_8js.html#a3370df69994ddee947b5acb08e416eed">range</a>(i, i+nb_of_vals)))</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="keyword">def </span>avoid_duplicates(x):</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="keywordflow">if</span> x <span class="keywordflow">not</span> <span class="keywordflow">in</span> vals: vals.append(x)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <a class="code" href="d3_8min_8js.html#a98d3c3705f20a781ba52ac2ee8381283">map</a>(avoid_duplicates, all_values)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        self.assertEqual(vals, expected_values)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        </div>
<div class="line"><a name="l00339"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_server.html">  339</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_server.html">TestServer</a>(unittest.TestCase):</div>
<div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_server.html#a26b1b5aaa859d024cb7114cc1d4c1fd2">  340</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_server.html#a26b1b5aaa859d024cb7114cc1d4c1fd2">setUp</a>(self):</div>
<div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_server.html#a4acfaa4e2d9b21de60c9a6fc63cfaa3a">  341</a></span>&#160;        self.<a class="code" href="classtests_1_1unittest__modbus_1_1_test_server.html#a4acfaa4e2d9b21de60c9a6fc63cfaa3a">server</a> = <a class="code" href="classmodbus__tk_1_1modbus_1_1_server.html">modbus_tk.modbus.Server</a>()</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    </div>
<div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_server.html#a56c54e463c817da67a20bb5e7b3b433a">  343</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_server.html#a56c54e463c817da67a20bb5e7b3b433a">tearDown</a>(self):</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">pass</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        </div>
<div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_server.html#ad3df7e2662932c82da1a3fd89b50d7d3">  346</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_server.html#ad3df7e2662932c82da1a3fd89b50d7d3">testInvalidSlaveId</a>(self):</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Check that an error is raised when adding a slave with a wrong id&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        slaves = (-5, 0, <span class="stringliteral">&quot;&quot;</span>, 256, 5600)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">for</span> s <span class="keywordflow">in</span> slaves:</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            self.assertRaises(Exception, self.server.add_slave, s)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_server.html#ab2e25b7bcf6b4305f1af99f5450ff1ff">  352</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_server.html#ab2e25b7bcf6b4305f1af99f5450ff1ff">testAddSlave</a>(self):</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Check that a slave is added correctly&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        slaves = <a class="code" href="d3_8min_8js.html#a3370df69994ddee947b5acb08e416eed">range</a>(1, 256)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">for</span> id <span class="keywordflow">in</span> slaves:</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            s = self.server.add_slave(id)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            self.assert_(str(s).find(<span class="stringliteral">&quot;modbus_tk.modbus.Slave&quot;</span>)&gt;0)</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_server.html#a74f1bf20b6fabda731498f885bb9f710">  359</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_server.html#a74f1bf20b6fabda731498f885bb9f710">testAddAndGetSlave</a>(self):</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Check that a slave can be retrieved by id after added&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        slaves = <a class="code" href="d3_8min_8js.html#a3370df69994ddee947b5acb08e416eed">range</a>(1, 248)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        d = {}</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">for</span> id <span class="keywordflow">in</span> slaves:</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            d[id] = self.server.add_slave(id)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        <span class="keywordflow">for</span> id <span class="keywordflow">in</span> slaves:</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            s = self.server.get_slave(id)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            self.assert_(s <span class="keywordflow">is</span> d[id])</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_server.html#a73e3743efdd47511106d9259daa0cb32">  369</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_server.html#a73e3743efdd47511106d9259daa0cb32">testErrorOnRemoveUnknownSlave</a>(self):</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Check that an error is raised when removing a slave with a wrong id&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        slaves = <a class="code" href="d3_8min_8js.html#a3370df69994ddee947b5acb08e416eed">range</a>(0, 249)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">for</span> id <span class="keywordflow">in</span> slaves:</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            self.assertRaises(Exception, self.server.remove_slave, id)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_server.html#ac6747e5dca9ab071ba319a3f0daee796">  375</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_server.html#ac6747e5dca9ab071ba319a3f0daee796">testAddAndRemove</a>(self):</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Add a slave, remove it and make sure it is not there anymore&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        slaves = <a class="code" href="d3_8min_8js.html#a3370df69994ddee947b5acb08e416eed">range</a>(1, 248)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">for</span> id <span class="keywordflow">in</span> slaves:</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            self.server.add_slave(id)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        <span class="keywordflow">for</span> id <span class="keywordflow">in</span> slaves:</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            self.server.remove_slave(id)</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">for</span> id <span class="keywordflow">in</span> slaves:</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            self.assertRaises(Exception, self.server.get_slave, id)</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_server.html#af2ee19c18d584ba97740132954143987">  385</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_server.html#af2ee19c18d584ba97740132954143987">testRemoveAllSlaves</a>(self):</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Add somes slave, remove all and make sure it there is nothing anymore&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        slaves = <a class="code" href="d3_8min_8js.html#a3370df69994ddee947b5acb08e416eed">range</a>(1, 248)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">for</span> id <span class="keywordflow">in</span> slaves:</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            self.server.add_slave(id)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        self.server.remove_all_slaves()</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="keywordflow">for</span> id <span class="keywordflow">in</span> slaves:</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            self.assertRaises(Exception, self.server.get_slave, id)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            </div>
<div class="line"><a name="l00394"></a><span class="lineno"><a class="line" href="classtests_1_1unittest__modbus_1_1_test_server.html#a298384f7859faa368979cd03f5eae134">  394</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtests_1_1unittest__modbus_1_1_test_server.html#a298384f7859faa368979cd03f5eae134">testHookOnSetBlockData</a>(self):</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        slave = self.server.add_slave(22)</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keyword">def </span>setblock_hook(args):</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            (block, slice, values) = args </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            setblock_hook.calls += 1</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        setblock_hook.calls = 0</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <a class="code" href="namespacemodbus__tk_1_1hooks.html#abbd9369e7563e8eac1a1d68392fc3c52">install_hook</a>(<span class="stringliteral">&#39;modbus.ModbusBlock.setitem&#39;</span>, setblock_hook)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">for</span> block_type <span class="keywordflow">in</span> (modbus_tk.defines.COILS, modbus_tk.defines.DISCRETE_INPUTS,</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                           modbus_tk.defines.HOLDING_REGISTERS, modbus_tk.defines.ANALOG_INPUTS):</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            slave.add_block(str(block_type), block_type, 0, 20)</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            slave.set_values(str(block_type), 0, 1)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            slave.set_values(str(block_type), 5, (1, 0, 1))</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        self.assertEquals(setblock_hook.calls, 8)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="keywordflow">if</span> __name__ == <span class="stringliteral">&#39;__main__&#39;</span>:</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    unittest.main(argv = unittest.sys.argv + [<span class="stringliteral">&#39;--verbose&#39;</span>])</div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_server_html_a56c54e463c817da67a20bb5e7b3b433a"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_server.html#a56c54e463c817da67a20bb5e7b3b433a">tests.unittest_modbus.TestServer.tearDown</a></div><div class="ttdeci">def tearDown(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00343">unittest_modbus.py:343</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_server_html_ac6747e5dca9ab071ba319a3f0daee796"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_server.html#ac6747e5dca9ab071ba319a3f0daee796">tests.unittest_modbus.TestServer.testAddAndRemove</a></div><div class="ttdeci">def testAddAndRemove(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00375">unittest_modbus.py:375</a></div></div>
<div class="ttc" id="classmodbus__tk_1_1modbus_1_1_invalid_modbus_block_error_html"><div class="ttname"><a href="classmodbus__tk_1_1modbus_1_1_invalid_modbus_block_error.html">modbus_tk.modbus.InvalidModbusBlockError</a></div><div class="ttdef"><b>Definition:</b> <a href="modbus-tk_8hg_2build_2lib_2modbus__tk_2modbus_8py_source.html#l00066">modbus.py:66</a></div></div>
<div class="ttc" id="classmodbus__tk_1_1modbus_1_1_missing_key_error_html"><div class="ttname"><a href="classmodbus__tk_1_1modbus_1_1_missing_key_error.html">modbus_tk.modbus.MissingKeyError</a></div><div class="ttdef"><b>Definition:</b> <a href="modbus-tk_8hg_2build_2lib_2modbus__tk_2modbus_8py_source.html#l00060">modbus.py:60</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_af501a33c3b94aa2e6f476f72fb5a0bb8"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#af501a33c3b94aa2e6f476f72fb5a0bb8">tests.unittest_modbus.TestSlaveRequestHandler.testHandleReadDiscreteInputsOnContinuousBlocks</a></div><div class="ttdeci">def testHandleReadDiscreteInputsOnContinuousBlocks(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00096">unittest_modbus.py:96</a></div></div>
<div class="ttc" id="classmodbus__tk_1_1modbus_1_1_slave_html"><div class="ttname"><a href="classmodbus__tk_1_1modbus_1_1_slave.html">modbus_tk.modbus.Slave</a></div><div class="ttdef"><b>Definition:</b> <a href="modbus-tk_8hg_2build_2lib_2modbus__tk_2modbus_8py_source.html#l00442">modbus.py:442</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html">tests.unittest_modbus.TestSlaveBlocks</a></div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00154">unittest_modbus.py:154</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_a71a93ab3c396f1e0c09d012ad7f0c401"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a71a93ab3c396f1e0c09d012ad7f0c401">tests.unittest_modbus.TestSlaveBlocks.testMultiThreadedSetValues</a></div><div class="ttdeci">def testMultiThreadedSetValues(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00297">unittest_modbus.py:297</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_a5609f8b9a2346afb7a9da1265fc2435b"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a5609f8b9a2346afb7a9da1265fc2435b">tests.unittest_modbus.TestSlaveBlocks.testSetRegisterAtTheBounds</a></div><div class="ttdeci">def testSetRegisterAtTheBounds(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00285">unittest_modbus.py:285</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_a193c5ee63b6f3effbc1d6480e92e33ef"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a193c5ee63b6f3effbc1d6480e92e33ef">tests.unittest_modbus.TestSlaveBlocks.testSetRegisterOutOfBounds</a></div><div class="ttdeci">def testSetRegisterOutOfBounds(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00276">unittest_modbus.py:276</a></div></div>
<div class="ttc" id="classmodbus__tk_1_1modbus_1_1_overlap_modbus_block_error_html"><div class="ttname"><a href="classmodbus__tk_1_1modbus_1_1_overlap_modbus_block_error.html">modbus_tk.modbus.OverlapModbusBlockError</a></div><div class="ttdef"><b>Definition:</b> <a href="modbus-tk_8hg_2build_2lib_2modbus__tk_2modbus_8py_source.html#l00077">modbus.py:77</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_ad4b38979291b94372573dc94e7d7f44c"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#ad4b38979291b94372573dc94e7d7f44c">tests.unittest_modbus.TestSlaveRequestHandler.testHandleReadDigitalInputs</a></div><div class="ttdeci">def testHandleReadDigitalInputs(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00080">unittest_modbus.py:80</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_server_html_a74f1bf20b6fabda731498f885bb9f710"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_server.html#a74f1bf20b6fabda731498f885bb9f710">tests.unittest_modbus.TestServer.testAddAndGetSlave</a></div><div class="ttdeci">def testAddAndGetSlave(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00359">unittest_modbus.py:359</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_ac69287979e12ff8d7bd2857350fdb1e7"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#ac69287979e12ff8d7bd2857350fdb1e7">tests.unittest_modbus.TestSlaveRequestHandler._read_continuous_blocks</a></div><div class="ttdeci">def _read_continuous_blocks(self, function, block_type)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00064">unittest_modbus.py:64</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a26b1b5aaa859d024cb7114cc1d4c1fd2"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a26b1b5aaa859d024cb7114cc1d4c1fd2">tests.unittest_modbus.TestSlaveRequestHandler.setUp</a></div><div class="ttdeci">def setUp(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00023">unittest_modbus.py:23</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_a79b38821352d9c9a41c2187986350988"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a79b38821352d9c9a41c2187986350988">tests.unittest_modbus.TestSlaveBlocks.testSetAndGetRegister</a></div><div class="ttdeci">def testSetAndGetRegister(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00255">unittest_modbus.py:255</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a347b6350ebeee5ba93b90f155e9c9554"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a347b6350ebeee5ba93b90f155e9c9554">tests.unittest_modbus.TestSlaveRequestHandler.testHandleReadDiscreteInputsOutOfBlocks</a></div><div class="ttdeci">def testHandleReadDiscreteInputsOutOfBlocks(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00088">unittest_modbus.py:88</a></div></div>
<div class="ttc" id="classmodbus__tk_1_1modbus_1_1_duplicated_key_error_html"><div class="ttname"><a href="classmodbus__tk_1_1modbus_1_1_duplicated_key_error.html">modbus_tk.modbus.DuplicatedKeyError</a></div><div class="ttdef"><b>Definition:</b> <a href="modbus-tk_8hg_2build_2lib_2modbus__tk_2modbus_8py_source.html#l00053">modbus.py:53</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_a80398e624a791449f001013c44085e81"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a80398e624a791449f001013c44085e81">tests.unittest_modbus.TestSlaveBlocks.testMultiThreadedAccess</a></div><div class="ttdeci">def testMultiThreadedAccess(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00240">unittest_modbus.py:240</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_aa0850b5aede0b4274184f4317b9725f2"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#aa0850b5aede0b4274184f4317b9725f2">tests.unittest_modbus.TestSlaveRequestHandler.testUnhandledFunction</a></div><div class="ttdeci">def testUnhandledFunction(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00030">unittest_modbus.py:30</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a56c54e463c817da67a20bb5e7b3b433a"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a56c54e463c817da67a20bb5e7b3b433a">tests.unittest_modbus.TestSlaveRequestHandler.tearDown</a></div><div class="ttdeci">def tearDown(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00027">unittest_modbus.py:27</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_server_html_ab2e25b7bcf6b4305f1af99f5450ff1ff"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_server.html#ab2e25b7bcf6b4305f1af99f5450ff1ff">tests.unittest_modbus.TestServer.testAddSlave</a></div><div class="ttdeci">def testAddSlave(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00352">unittest_modbus.py:352</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_a94fd8a754b77cb45eb8d2bf1dee95b51"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a94fd8a754b77cb45eb8d2bf1dee95b51">tests.unittest_modbus.TestSlaveBlocks.testSetAndGetSeveralRegisters</a></div><div class="ttdeci">def testSetAndGetSeveralRegisters(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00262">unittest_modbus.py:262</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html">tests.unittest_modbus.TestSlaveRequestHandler</a></div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00022">unittest_modbus.py:22</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a4076af55e465a7670252081cf8beee44"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a4076af55e465a7670252081cf8beee44">tests.unittest_modbus.TestSlaveRequestHandler._read_registers</a></div><div class="ttdeci">def _read_registers(self, function, block_type)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00106">unittest_modbus.py:106</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a789fb926c435ba3bc75f2690710d0ed1"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a789fb926c435ba3bc75f2690710d0ed1">tests.unittest_modbus.TestSlaveRequestHandler.testHandleReadCoilsOutOfBlocks</a></div><div class="ttdeci">def testHandleReadCoilsOutOfBlocks(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00084">unittest_modbus.py:84</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_af8c35f584ccb58c13a53d2f4c651c47a"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#af8c35f584ccb58c13a53d2f4c651c47a">tests.unittest_modbus.TestSlaveBlocks.testAddWrongAddress</a></div><div class="ttdeci">def testAddWrongAddress(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00210">unittest_modbus.py:210</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_a26b1b5aaa859d024cb7114cc1d4c1fd2"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a26b1b5aaa859d024cb7114cc1d4c1fd2">tests.unittest_modbus.TestSlaveBlocks.setUp</a></div><div class="ttdeci">def setUp(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00155">unittest_modbus.py:155</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_af066fa9ff71b626cb820b8c8a2ab08cb"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#af066fa9ff71b626cb820b8c8a2ab08cb">tests.unittest_modbus.TestSlaveBlocks.testAddUnsupportedBlock</a></div><div class="ttdeci">def testAddUnsupportedBlock(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00204">unittest_modbus.py:204</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_abbcd3f292ab6e8daf7fe4c2f0d94780e"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#abbcd3f292ab6e8daf7fe4c2f0d94780e">tests.unittest_modbus.TestSlaveBlocks._slave</a></div><div class="ttdeci">_slave</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00156">unittest_modbus.py:156</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_server_html_a4acfaa4e2d9b21de60c9a6fc63cfaa3a"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_server.html#a4acfaa4e2d9b21de60c9a6fc63cfaa3a">tests.unittest_modbus.TestServer.server</a></div><div class="ttdeci">server</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00341">unittest_modbus.py:341</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_a68814c2f3d97e49a38a046c877a8fc34"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a68814c2f3d97e49a38a046c877a8fc34">tests.unittest_modbus.TestSlaveBlocks.testAddWrongSize</a></div><div class="ttdeci">def testAddWrongSize(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00216">unittest_modbus.py:216</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a787948375c4ff293d01630e5e981c9db"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a787948375c4ff293d01630e5e981c9db">tests.unittest_modbus.TestSlaveRequestHandler.testHandleReadInputRegistersOutOfBlocks</a></div><div class="ttdeci">def testHandleReadInputRegistersOutOfBlocks(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00141">unittest_modbus.py:141</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a8fd137163afea7254084d66180df6948"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a8fd137163afea7254084d66180df6948">tests.unittest_modbus.TestSlaveRequestHandler.testHandleReadHoldingRegistersOutOfBlocks</a></div><div class="ttdeci">def testHandleReadHoldingRegistersOutOfBlocks(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00137">unittest_modbus.py:137</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_aaefbfe1d894fae442358ca001876efd1"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#aaefbfe1d894fae442358ca001876efd1">tests.unittest_modbus.TestSlaveRequestHandler.testHandleReadAnalogInputs</a></div><div class="ttdeci">def testHandleReadAnalogInputs(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00119">unittest_modbus.py:119</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a8df671a80eb460353428a0cd5059b902"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a8df671a80eb460353428a0cd5059b902">tests.unittest_modbus.TestSlaveRequestHandler._read_too_many_registers</a></div><div class="ttdeci">def _read_too_many_registers(self, function, block_type)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00123">unittest_modbus.py:123</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_a6007efa5684c2cf07e8a14777e36d2ad"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a6007efa5684c2cf07e8a14777e36d2ad">tests.unittest_modbus.TestSlaveBlocks.testOverlappedBlocks</a></div><div class="ttdeci">def testOverlappedBlocks(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00224">unittest_modbus.py:224</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_ad5d439572f905fac3d11f8ee8171c56a"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#ad5d439572f905fac3d11f8ee8171c56a">tests.unittest_modbus.TestSlaveBlocks.testSetRegisterOnContinuousBlocks</a></div><div class="ttdeci">def testSetRegisterOnContinuousBlocks(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00291">unittest_modbus.py:291</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a705391f3be33314bd5788a28f7538642"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a705391f3be33314bd5788a28f7538642">tests.unittest_modbus.TestSlaveRequestHandler._name</a></div><div class="ttdeci">_name</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00025">unittest_modbus.py:25</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_server_html_a73e3743efdd47511106d9259daa0cb32"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_server.html#a73e3743efdd47511106d9259daa0cb32">tests.unittest_modbus.TestServer.testErrorOnRemoveUnknownSlave</a></div><div class="ttdeci">def testErrorOnRemoveUnknownSlave(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00369">unittest_modbus.py:369</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_server_html"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_server.html">tests.unittest_modbus.TestServer</a></div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00339">unittest_modbus.py:339</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_ae5c4d121f1ca2153d7ba2ddf1e1a71d2"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#ae5c4d121f1ca2153d7ba2ddf1e1a71d2">tests.unittest_modbus.TestSlaveRequestHandler.testHandleReadCoils</a></div><div class="ttdeci">def testHandleReadCoils(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00076">unittest_modbus.py:76</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_acd7bdb8764d9c4ad1ba7c6785adf47c8"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#acd7bdb8764d9c4ad1ba7c6785adf47c8">tests.unittest_modbus.TestSlaveBlocks.testAddBlocksOfType</a></div><div class="ttdeci">def testAddBlocksOfType(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00193">unittest_modbus.py:193</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a0f9c1cfea60d170cb6cea11403cd1b7e"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a0f9c1cfea60d170cb6cea11403cd1b7e">tests.unittest_modbus.TestSlaveRequestHandler._make_response</a></div><div class="ttdeci">def _make_response(self, function, regs)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00100">unittest_modbus.py:100</a></div></div>
<div class="ttc" id="classmodbus__tk_1_1modbus_1_1_invalid_argument_error_html"><div class="ttname"><a href="classmodbus__tk_1_1modbus_1_1_invalid_argument_error.html">modbus_tk.modbus.InvalidArgumentError</a></div><div class="ttdef"><b>Definition:</b> <a href="modbus-tk_8hg_2build_2lib_2modbus__tk_2modbus_8py_source.html#l00070">modbus.py:70</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a726b14953def89e7b7a7c1fada2179bc"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a726b14953def89e7b7a7c1fada2179bc">tests.unittest_modbus.TestSlaveRequestHandler.testHandleReadHoldingRegistersOnContinuousBlocks</a></div><div class="ttdeci">def testHandleReadHoldingRegistersOnContinuousBlocks(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00145">unittest_modbus.py:145</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_aba67c951cddf1e7d84dc3fe0cbdeaabf"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#aba67c951cddf1e7d84dc3fe0cbdeaabf">tests.unittest_modbus.TestSlaveBlocks._block_types</a></div><div class="ttdeci">_block_types</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00158">unittest_modbus.py:158</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_aa56879674f06e6887a2702b57e980a30"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#aa56879674f06e6887a2702b57e980a30">tests.unittest_modbus.TestSlaveRequestHandler.testHandleReadHoldingRegisters</a></div><div class="ttdeci">def testHandleReadHoldingRegisters(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00115">unittest_modbus.py:115</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a47e56ac3a16b0ea02f6b9e783ac7cfc1"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a47e56ac3a16b0ea02f6b9e783ac7cfc1">tests.unittest_modbus.TestSlaveRequestHandler.testHandleReadInputregistersOnContinuousBlocks</a></div><div class="ttdeci">def testHandleReadInputregistersOnContinuousBlocks(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00149">unittest_modbus.py:149</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_a1f9195ca065c2e728d4d6865bcdb9bc6"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a1f9195ca065c2e728d4d6865bcdb9bc6">tests.unittest_modbus.TestSlaveBlocks.testAddBlock</a></div><div class="ttdeci">def testAddBlock(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00164">unittest_modbus.py:164</a></div></div>
<div class="ttc" id="classmodbus__tk_1_1modbus_1_1_server_html"><div class="ttname"><a href="classmodbus__tk_1_1modbus_1_1_server.html">modbus_tk.modbus.Server</a></div><div class="ttdef"><b>Definition:</b> <a href="modbus-tk_8hg_2build_2lib_2modbus__tk_2modbus_8py_source.html#l00843">modbus.py:843</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a6691efde2183e416d0e1e9c985b5ac15"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a6691efde2183e416d0e1e9c985b5ac15">tests.unittest_modbus.TestSlaveRequestHandler.testHandleReadTooManyHoldingRegisters</a></div><div class="ttdeci">def testHandleReadTooManyHoldingRegisters(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00129">unittest_modbus.py:129</a></div></div>
<div class="ttc" id="namespacemodbus__tk_1_1hooks_html"><div class="ttname"><a href="namespacemodbus__tk_1_1hooks.html">modbus_tk.hooks</a></div><div class="ttdef"><b>Definition:</b> <a href="modbus-tk_8hg_2build_2lib_2modbus__tk_2hooks_8py_source.html#l00001">hooks.py:1</a></div></div>
<div class="ttc" id="d3_8min_8js_html_a3370df69994ddee947b5acb08e416eed"><div class="ttname"><a href="d3_8min_8js.html#a3370df69994ddee947b5acb08e416eed">range</a></div><div class="ttdeci">Bo range</div><div class="ttdef"><b>Definition:</b> <a href="d3_8min_8js_source.html#l00003">d3.min.js:3</a></div></div>
<div class="ttc" id="d3_8min_8js_html_a98d3c3705f20a781ba52ac2ee8381283"><div class="ttname"><a href="d3_8min_8js.html#a98d3c3705f20a781ba52ac2ee8381283">map</a></div><div class="ttdeci">Bo Bo map</div><div class="ttdef"><b>Definition:</b> <a href="d3_8min_8js_source.html#l00003">d3.min.js:3</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a4fcc5bb04d8c95bb4d12f38d213fd5b6"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a4fcc5bb04d8c95bb4d12f38d213fd5b6">tests.unittest_modbus.TestSlaveRequestHandler._read_out_of_blocks</a></div><div class="ttdeci">def _read_out_of_blocks(self, function, block_type)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00055">unittest_modbus.py:55</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_server_html_a26b1b5aaa859d024cb7114cc1d4c1fd2"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_server.html#a26b1b5aaa859d024cb7114cc1d4c1fd2">tests.unittest_modbus.TestServer.setUp</a></div><div class="ttdeci">def setUp(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00340">unittest_modbus.py:340</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a45e6676df6c3f1d2185be6657affb1bb"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a45e6676df6c3f1d2185be6657affb1bb">tests.unittest_modbus.TestSlaveRequestHandler.testHandleReadCoilsOnContinuousBlocks</a></div><div class="ttdeci">def testHandleReadCoilsOnContinuousBlocks(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00092">unittest_modbus.py:92</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_ab09a814d4fb0c871c2145e0269ee4861"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#ab09a814d4fb0c871c2145e0269ee4861">tests.unittest_modbus.TestSlaveBlocks.testAddContinuousBlock</a></div><div class="ttdeci">def testAddContinuousBlock(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00232">unittest_modbus.py:232</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a010e6010f8458aa320379073ea082e44"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a010e6010f8458aa320379073ea082e44">tests.unittest_modbus.TestSlaveRequestHandler.testHandleReadTooManyAnalogInputs</a></div><div class="ttdeci">def testHandleReadTooManyAnalogInputs(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00133">unittest_modbus.py:133</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_server_html_af2ee19c18d584ba97740132954143987"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_server.html#af2ee19c18d584ba97740132954143987">tests.unittest_modbus.TestServer.testRemoveAllSlaves</a></div><div class="ttdeci">def testRemoveAllSlaves(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00385">unittest_modbus.py:385</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_afd61c1eff145d4237866c49d96641f32"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#afd61c1eff145d4237866c49d96641f32">tests.unittest_modbus.TestSlaveBlocks.testAddBlockWithSameName</a></div><div class="ttdeci">def testAddBlockWithSameName(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00176">unittest_modbus.py:176</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_a0d9eb34faa49d048623d3861da5148d4"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a0d9eb34faa49d048623d3861da5148d4">tests.unittest_modbus.TestSlaveBlocks.testAddAndRemoveBlocks</a></div><div class="ttdeci">def testAddAndRemoveBlocks(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00181">unittest_modbus.py:181</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_server_html_a298384f7859faa368979cd03f5eae134"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_server.html#a298384f7859faa368979cd03f5eae134">tests.unittest_modbus.TestServer.testHookOnSetBlockData</a></div><div class="ttdeci">def testHookOnSetBlockData(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00394">unittest_modbus.py:394</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_abbcd3f292ab6e8daf7fe4c2f0d94780e"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#abbcd3f292ab6e8daf7fe4c2f0d94780e">tests.unittest_modbus.TestSlaveRequestHandler._slave</a></div><div class="ttdeci">_slave</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00024">unittest_modbus.py:24</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_server_html_ad3df7e2662932c82da1a3fd89b50d7d3"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_server.html#ad3df7e2662932c82da1a3fd89b50d7d3">tests.unittest_modbus.TestServer.testInvalidSlaveId</a></div><div class="ttdeci">def testInvalidSlaveId(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00346">unittest_modbus.py:346</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_a56c54e463c817da67a20bb5e7b3b433a"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a56c54e463c817da67a20bb5e7b3b433a">tests.unittest_modbus.TestSlaveBlocks.tearDown</a></div><div class="ttdeci">def tearDown(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00161">unittest_modbus.py:161</a></div></div>
<div class="ttc" id="namespacemodbus__tk_1_1hooks_html_abbd9369e7563e8eac1a1d68392fc3c52"><div class="ttname"><a href="namespacemodbus__tk_1_1hooks.html#abbd9369e7563e8eac1a1d68392fc3c52">modbus_tk.hooks.install_hook</a></div><div class="ttdeci">def install_hook(name, fct)</div><div class="ttdef"><b>Definition:</b> <a href="modbus-tk_8hg_2build_2lib_2modbus__tk_2hooks_8py_source.html#l00018">hooks.py:18</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_request_handler_html_a73bef7c5859f63411d218e13e54ac7c0"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_request_handler.html#a73bef7c5859f63411d218e13e54ac7c0">tests.unittest_modbus.TestSlaveRequestHandler._read_digital_data</a></div><div class="ttdeci">def _read_digital_data(self, function, block_type)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00037">unittest_modbus.py:37</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_ad4f5c4705eabc19811498be3789ac7a9"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#ad4f5c4705eabc19811498be3789ac7a9">tests.unittest_modbus.TestSlaveBlocks.testSetAndGetSeveralCoils</a></div><div class="ttdeci">def testSetAndGetSeveralCoils(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00269">unittest_modbus.py:269</a></div></div>
<div class="ttc" id="classmodbus__tk_1_1modbus_1_1_out_of_modbus_block_error_html"><div class="ttname"><a href="classmodbus__tk_1_1modbus_1_1_out_of_modbus_block_error.html">modbus_tk.modbus.OutOfModbusBlockError</a></div><div class="ttdef"><b>Definition:</b> <a href="modbus-tk_8hg_2build_2lib_2modbus__tk_2modbus_8py_source.html#l00084">modbus.py:84</a></div></div>
<div class="ttc" id="namespacemodbus__tk_1_1modbus_html"><div class="ttname"><a href="namespacemodbus__tk_1_1modbus.html">modbus_tk.modbus</a></div><div class="ttdef"><b>Definition:</b> <a href="modbus-tk_8hg_2build_2lib_2modbus__tk_2modbus_8py_source.html#l00001">modbus.py:1</a></div></div>
<div class="ttc" id="namespacemodbus__tk_1_1utils_html_ac11b49ef36ecb6a22a86d7bc94431c8f"><div class="ttname"><a href="namespacemodbus__tk_1_1utils.html#ac11b49ef36ecb6a22a86d7bc94431c8f">modbus_tk.utils.create_logger</a></div><div class="ttdeci">def create_logger</div><div class="ttdef"><b>Definition:</b> <a href="modbus-tk_8hg_2build_2lib_2modbus__tk_2utils_8py_source.html#l00091">utils.py:91</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_a705391f3be33314bd5788a28f7538642"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a705391f3be33314bd5788a28f7538642">tests.unittest_modbus.TestSlaveBlocks._name</a></div><div class="ttdeci">_name</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00157">unittest_modbus.py:157</a></div></div>
<div class="ttc" id="classtests_1_1unittest__modbus_1_1_test_slave_blocks_html_a45b857ca6c70300d45bfb1bf12932934"><div class="ttname"><a href="classtests_1_1unittest__modbus_1_1_test_slave_blocks.html#a45b857ca6c70300d45bfb1bf12932934">tests.unittest_modbus.TestSlaveBlocks.testRemoveBlock</a></div><div class="ttdeci">def testRemoveBlock(self)</div><div class="ttdef"><b>Definition:</b> <a href="unittest__modbus_8py_source.html#l00169">unittest_modbus.py:169</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_50a38882319ba770cdfddee41fc9d7d6.html">moduleScripts</a></li><li class="navelem"><a class="el" href="dir_e17229dbb96b03cabc1b39ba12eaae49.html">RTUscripts</a></li><li class="navelem"><a class="el" href="dir_5e38ae42643751523b793e9d080b3eb1.html">protolibs</a></li><li class="navelem"><a class="el" href="dir_50d8b070e5484214409ebb5bf5745985.html">modbus-tk.hg</a></li><li class="navelem"><a class="el" href="dir_f7313ac0ac1aab65377fec323220021b.html">tests</a></li><li class="navelem"><a class="el" href="unittest__modbus_8py.html">unittest_modbus.py</a></li>
    <li class="footer">Generated on Tue Apr 14 2015 18:27:57 for VirtualSCADA by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
